{
  "kind": "build_request",
  "title": "Auto-populate Assignment Date and Completion Date based on task state changes",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-85",
      "text": "Update the backend Task update logic so that when a task's assignedName field transitions from null/empty to a non-empty value, the assignmentDate field is automatically set to the current timestamp (Int representing nanoseconds since epoch) if assignmentDate is not already set.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-auto-update"
        ],
        "quotes": [
          "auto updation of assignment date when assign a task to a assignee"
        ]
      },
      "acceptanceCriteria": [
        "When updateTask is called with a non-empty assignedName and the existing task has null/empty assignedName, the backend automatically sets assignmentDate to the current timestamp",
        "If assignmentDate is already set (non-null), the backend does not overwrite it",
        "If assignedName remains null/empty or does not change, assignmentDate is not modified"
      ]
    },
    {
      "id": "REQ-86",
      "text": "Update the backend Task update logic so that when a task's status field is set to 'Completed', the completionDate field is automatically set to the current timestamp (Int representing nanoseconds since epoch) if completionDate is not already set.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-auto-update"
        ],
        "quotes": [
          "update date of completion when mark task statsus  as completed"
        ]
      },
      "acceptanceCriteria": [
        "When updateTask is called with status='Completed' and the existing task has null completionDate, the backend automatically sets completionDate to the current timestamp",
        "If completionDate is already set (non-null), the backend does not overwrite it",
        "If status is set to any value other than 'Completed', completionDate is not automatically modified"
      ]
    },
    {
      "id": "REQ-87",
      "text": "Update the frontend Task mutation hooks (useUpdateTask in frontend/src/hooks/tasks.ts) and all task update UI flows (TaskFormDialog, TaskQuickStatus, InlineCommentEditor, bulk edit) to ensure they send all existing task fields when updating a task, so the backend auto-population logic for assignmentDate and completionDate can reliably detect state transitions.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-auto-update"
        ]
      },
      "acceptanceCriteria": [
        "All task update mutations send the complete task payload including current values for assignedName and status",
        "The backend receives sufficient context to detect assignedName transitions (null → non-empty) and status transitions (→ 'Completed')",
        "No existing task update flows are broken by these changes"
      ]
    }
  ],
  "constraints": [
    "Maintain single-actor architecture; all Motoko logic in backend/main.mo",
    "Do not modify immutable frontend paths (hooks/useInternetIdentity.ts, hooks/useActor.ts, main.tsx, components/ui)",
    "Preserve existing access control behavior (trap when unauthenticated)",
    "Only auto-populate dates when transitioning to the target state; do not overwrite existing dates"
  ],
  "nonGoals": [
    "Changing the Task data model or adding new fields",
    "Modifying the UI to display these dates differently",
    "Adding user-configurable auto-population rules",
    "Auto-populating dates during bulk operations (CSV upload)"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}